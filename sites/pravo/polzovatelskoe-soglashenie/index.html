<!DOCTYPE html>
<html lang='ru'>
  <head>
      <base href="" />
    <meta charset="UTF-8" />
    <meta name='viewport' content='width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0' />
    <meta http-equiv='X-UA-Compatible' content='ie=edge' />
    <title>Пользовательское соглашение</title> 
    
    <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://gtm.taroirena.ru/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-T25VCD5');</script>
<!-- End Google Tag Manager -->
      <link href="template/styles/layout_4.css@v=1.1.2.css" rel="stylesheet"></head>
  <body>
        <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://gtm.taroirena.ru/ns.html?id=GTM-T25VCD5"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

    <!-- header -->
    <header class='menu section-outer section-header'>
        <div class='container'>
          <div class='row'>
            </div>
            <div class='col-md-9 col-lg-10'>
              <ul class='nav-wrapper nav-wrapper--right'>
                <li class='nav-wrapper__item'>
                  <span>Браслеты: </span>
                </li>
                <li class='nav-wrapper__item'>
                  <a class='nav-wrapper__item-link' href='https://store.taroirena.ru/shop/amulety/braslet-energiya-lyubvi/'> Энергия Любви </a>
                </li>
                <li class='nav-wrapper__item'>
                  <a class='nav-wrapper__item-link' href='https://store.taroirena.ru/shop/amulety/braslet-finansovogo-blagopoluchiya/'> Финансовое благополучие </a>
                </li>
                <li class='nav-wrapper__item'>
                  <a class='nav-wrapper__item-link' href='https://store.taroirena.ru/shop/amulety/braslet-zashhita-ot-negativnogo-vozdejstviya/'> Защита от негативного воздействия </a>
                </li>
              </ul>
            </div>
          </div>
        </div> 
    </header>
    <!-- / header -->

    <!-- content -->
    <section class='section-outer section-content'>
        <div class="title">
          <div class="container">
            <h1>Пользовательское соглашение</h1>
          </div>
        </div>
        <div class='container'>
          <div class="wrapper">
              <p style="display: inline !important;">Данное Пользовательское соглашение (далее Соглашение) содержит правила пользования услугами онлайн-магазина (https://dharmamulet.com/) ,  принадлежащего ИП Багдасарян Роман Артурович, г Краснодар, ул. Ивана Кияшко д.6, Банковские реквизиты: Банк Филиал "ЦЕНТРАЛЬНЫЙ" Банка ВТБ ПАО, Г. МОСКВА, Р/счет 40802810206080000319, Кор/счет 30101810145250000411, ИНН 230813931473, БИК 044525411, и устанавливает порядок взаимодействия между Продавцом и Покупателем.</p>
<p style="display: inline !important;"> </p>
<p style="display: inline !important;"> </p>
<p align="center"><strong>1. Термины и определения настоящего Соглашения</strong><strong> </strong></p>
<p>Продавец — ИП Багдасарян Роман Артурович дистанционно осуществляет продажу продукции с сайта https://dharmamulet.com/</p>
<p>Продажа товаров дистанционным способом — продажа товаров по договору розничной купли-продажи, заключаемому на основании ознакомления покупателя с предложенным продавцом описанием товара, содержащимся в каталогах, представленным на фотоснимках с использованием информационно-телекоммуникационной сети Интернет, способами, исключающими возможность непосредственного ознакомления покупателя с товаром либо образцом товара при заключении такого договора.</p>
<p>Покупатель — любое юридическое или физическое лицо, обладающее необходимой и достаточной правоспособностью для совершения покупки (в частности, оформления, подтверждения, оплаты заказа и его  и получения) на условиях и в порядке, установленном настоящим Соглашением и действительным законодательством Российской Федерации.</p>
<p>Потребитель — гражданин, имеющий намерение заказать или приобрести, либо заказывающий, приобретающий или использующий товары исключительно для личных, семейных, домашних и иных нужд, не связанных с осуществлением предпринимательской деятельности.</p>
<p>Товар — материальный предмет, являющийся объектом купли-продажи. Вся информация о Товаре размещена на Сайте Продавцом для осуществления продажи дистанционно посредством Онлайн-магазина. Список Товаров, размещаемых на Сайте, может быть изменен на усмотрение Продавца без предварительного уведомления Покупателя.</p>
<p>Онлайн-магазин — торговая площадка Продавца, располагающаяся в сети Интернет и имеющая собственный каталог предлагаемой продукции (виртуальную витрину) и механизм оформления Заказа. Интерактивный механизм включает в себя указание цен на выбранные Покупателем Товары, а также другую, необходимую для осуществления Заказа, информацию.</p>
<p>Сайт — веб-ресурс Онлайн-магазина https://dharmamulet.com/</p>
<p>Соглашение — данное Пользовательское соглашение, которое устанавливает порядок взаимодействия между Продавцом и Покупателем.</p>
<p>Заказ — документ, оформленный и подтвержденный Покупателем в Онлайн-магазине, который содержит список Товаров и услуг, а также иные необходимые условия купли-продажи товара. Договор считается заключенным с момента выдачи продавцом кассового/товарного чека либо иного документа, подтверждающего оплату товара, покупателю или с момента получения продавцом сообщения о намерении покупателя приобрести товар.</p>
<p>Доставка — услуга, обеспечивающая перемещение товара со склада Продавца Покупателю, на условиях, предусмотренных настоящим соглашением.</p>
<p> </p>
<p align="center"><strong>2. Общие условия</strong></p>
<p>2.1. Оформляя и подтверждая заказ с целью совершения покупки Товаров на Сайте, Покупатель автоматически принимает все условия, изложенные в настоящем Соглашении, а также в политике обработки персональных данных Продавца. При несогласии Покупателя с данными пунктами Соглашения рекомендуется прекратить использование интернет-ресурса и покинуть Сайт.</p>
<p>2.2. Товар представляется на Сайте через графические, текстовые и рекламные материалы, которые считаются собственностью Продавца. Если Покупателю требуется дополнительная информация о Товаре, для принятия решения о покупке, продавец обязуется предоставить эту информацию посредством электронной почты <strong>какой адрес?</strong> или личного общения по телефону.</p>
<p>2.3. При оформлении и подтверждении Заказа через Сайт Покупатель подтверждает свое согласие на заключение сделки на условиях, предложенных Продавцом, предусмотренных Заказом и настоящим Соглашением.</p>
<p>2.4. Продавец имеет право в одностороннем порядке принимать и изменять условия настоящего Соглашения (дополнять, удалять и корректировать любые пункты и их части). Изменения проводятся без предварительного оповещения Покупателя, путем размещения соответствующей информации на Сайте. Покупатель, присоединившийся к настоящему соглашению, обязан самостоятельно отслеживать указанные изменения. В отношении совершенных покупок применению подлежат условия, опубликованные на момент совершения сделки (подтверждения заказа).</p>
<p> </p>
<p align="center"><strong>3. Предмет соглашения</strong></p>
<p>3.1. Продавец, основываясь на Заказе Покупателя и на условиях 100% предоплаты, продает Товар по цене, указанной на Сайте. Покупатель в свою очередь оплачивает и принимает Товар в соответствии с настоящим Соглашением и условиями, согласованными в Заказе.</p>
<p>3.2. Продавец обязуется осуществить доставку в оговоренные сроки способом, определенным сторонами в момент продажи Товара.</p>
<p>3.3. Порядок Доставки и ее оплата оговорены в п.7 настоящего Соглашения.</p>
<p>3.4. Продавец вправе отказать в продаже Товара Покупателю, нарушающему условия настоящего Соглашения.</p>
<p> </p>
<p align="center"><strong>4. Информация о Товаре</strong></p>
<p>4.1. Фотография — это изображение Товара. Оригинальный вид товара может отличатся от представленных на Сайте фотографий. Каждый фотообразец имеет необходимую сопроводительную информацию: цена, артикул и описание Товара.</p>
<p> </p>
<p align="center"><strong>5. Заказ Товара</strong></p>
<p>5.1. Заказ Товара осуществляется в Онлайн-магазине посредством заполнения формы Заказа и подтверждения формы Заказа специалистом Контакт-центра Продавца по телефону.</p>
<p>5.2. При отсутствии Товара, указанного в Заказе, Продавец обязан оповестить Покупателя об этом в течение одного рабочего дня с момента оформления Заказа и предложить аналогичный Товар на замену при его наличии. Покупатель вправе отказаться от данной позиции или согласиться на замену товара.</p>
<p> </p>
<p align="center"><strong>6. Оплата Товара</strong><strong> </strong></p>
<p>6.1. Оплата Товаров и услуг производится по ценам, установленным Продавцом.</p>
<p>6.2. Цены в карточках товара Онлайн-магазина указаны в российских рублях. Продавец принимает оплату только в рублях. Доставка Товара не включается в стоимость и рассчитывается отдельно при формировании Заказа по согласованию с Покупателем.</p>
<p>6.3. Цены на Товар в Онлайн-магазине могут быть изменены Продавцом без предварительного уведомления Покупателя, при этом цена на Товар в уже сформированном и оплаченном Заказе не подлежит изменению.</p>
<p>6.4. Порядок оплаты Товара безналичным способом указан в разделе Сайта «Оплата».</p>
<p> </p>
<p align="center"><strong>7.Доставка товара</strong></p>
<p>7.1. Доставка Товара осуществляется ООО «СДЭК-Глобал», ФГУП «Почта России» и другими специализированными организациями.</p>
<p>7.2. Все расходы по Доставке Товара несет Покупатель.</p>
<p>7.3. В случае если доставка товара произведена в установленные договором (согласованные с Покупателем) сроки, но товар не был передан Покупателю по его вине, последующая доставка производится в новые сроки, согласованные с продавцом, после повторной предварительной оплаты покупателем стоимости услуг по доставке товара.</p>
<p>7.4. Доставленный товар передается покупателю по месту его жительства или иному указанному им адресу, а при отсутствии покупателя - любому лицу, предъявившему квитанцию или иной документ, подтверждающий заключение договора или оформление доставки товара.</p>
<p>7.5. Приемка Товара от Продавца Покупателю должна сопровождаться проверкой комплектации и внешнего вида. Товар следует распаковать, осмотреть на наличие внешних повреждений, на соответствие количества, комплектации и заявленным потребительским свойствам.</p>
<p>7.6. Покупатель имеет право принять Товар или отказаться от него в момент передачи при Доставке службой доставки согласно разделу 8 настоящего Соглашения.</p>
<p> </p>
<p align="center"><strong>8. Возврат Товара и денежных средств</strong><strong> </strong></p>
<p>8.1. Возврат и обмен Товара производится в соответствии с положениями Гражданского кодекса РФ и Законом РФ «О защите прав потребителей» от 07.02.1992 г. № 2300-1, Правилами продажи товаров дистанционным способом (утв. Постановлением Правительства РФ от 27.09.2007 № 612).</p>
<p>8.2. Возврат товара надлежащего качества.</p>
<p>8.2.1. Покупатель вправе отказаться от заказанного Товара в любое время до его получения, а после получения Товара — в течение 7 дней, не считая дня покупки. Возврат Товара надлежащего качества возможен в случае, если сохранены его товарный вид, потребительские свойства, а также документ, подтверждающий факт и условия покупки указанного Товара.</p>
<p>8.2.2. При отказе Покупателя от Товара согласно п. 8.2.1 Договора Продавец возвращает ему сумму внесенной предварительной оплаты, за исключением расходов Продавца на доставку Товара Покупателю, не позднее чем через 10 дней с даты получения Продавцом письменного заявления Покупателя.</p>
<p>8.2.3. Покупатель предупрежден о необходимости сохранения товарного вида, потребительских свойств Товара надлежащего качества до возврата его Продавцу, а также документов, подтверждающих заключение договора купли-продажи Товара. Отсутствие у Покупателя указанного документа не лишает его возможности ссылаться на другие доказательства приобретения Товара у Продавца.</p>
<p>8.3. Возврат товара ненадлежащего качества.</p>
<p>8.3.1.Покупатель может возвратить Товар ненадлежащего качества Продавцу и потребовать возврата уплаченной за Товар денежной суммы.</p>
<p>Покупатель также может потребовать:</p>
<p>безвозмездного устранения недостатков Товара или возмещения расходов на их исправление Покупателем или третьим лицом;</p>
<p>соразмерного уменьшения покупной цены;</p>
<p>замены Товара ненадлежащего качества либо устранения недостатков;</p>
<p>замены на Товар аналогичной марки (модели, артикула) или на такой же Товар другой марки (модели, артикула) с соответствующим перерасчетом покупной цены;</p>
<p>возврата уплаченной за Товар денежной суммы.</p>
<p>В случае предъявления требования о возврате уплаченной за Товар денежной суммы стоимость Товара подлежит возврату Покупателю в течение 10 дней с момента получения Продавцом письменного заявления Покупателя. Покупатель несет ответственность за достоверность указанных им в заявлении реквизитов для возврата денежных средств.</p>
<p>8.3.2. В случае обнаружения Покупателем недостатков Товара и предъявления требования о его замене Продавец обязан заменить такой Товар в течение семи дней со дня предъявления указанного требования Покупателем, а при необходимости дополнительной проверки качества такого Товара Продавцом — в течение двадцати дней со дня предъявления указанного требования.</p>
<p>Если у Продавца в момент предъявления требования отсутствует необходимый для замены Товар, замена должна быть проведена в течение месяца со дня предъявления такого требования.</p>
<p>8.3.3. При отказе от Товара Покупатель обязан возвратить Товар ненадлежащего качества Продавцу.</p>
<p> </p>
<p align="center"><strong>9. Авторское право</strong></p>
<p>9.1. Вся информация, содержащаяся на страницах Сайта, включая характеристики товаров, текстовые описания, дизайн, логотип, товарный знак — являются собственностью Продавца. Запрещено копирование, скачивание и любое другое использование контента Онлайн-магазина в коммерческих целях без предварительного письменного согласия Продавца.</p>
<p> </p>
<p align="center"><strong>10. Исключение гарантий</strong></p>
<p>10.1 Настоящий Сайт и услуги предоставляются «как есть», без каких-либо прямо выраженных или подразумеваемых гарантий, в максимально допустимом законом объеме. Продавец отказывается от всех прямых или подразумеваемых гарантий, включая без ограничения подразумеваемые гарантии годности к продаже, соответствия определенной цели использования и не нарушения прав. Продавец не предоставляет никаких заверений или гарантий в том, что использование товара и услуг будет отвечать ожиданиям покупателя (за исключением оговоренных в настоящем соглашении).  </p>
<p> </p>
<p align="center"><strong>11. Ответственность сторон</strong></p>
<p>11.1. Продавец не несет ответственности:</p>
<p>11.1.1. За достоверность и правильность данных, указанных Покупателем во время регистрации или при Заказе Товара, а также за продажу и Доставку Товара вследствие указания Покупателем недостоверной информации о себе.</p>
<p>11.1.2. За действия посреднических служб и сервисов, используемых в целях предоставления услуг Покупателю, но не принадлежащих Продавцу (третьих лиц): платежных систем банков, интернет-провайдеров, e-mail-сервисов, почтовых служб и т.д.</p>
<p>11.1.3. За любые расходы Покупателя, за прямой либо косвенный ущерб, который может быть нанесен Покупателю в результате пользования услугами Онлайн-магазина или невозможности их использования, за ущерб, понесенный в результате ошибок, пропусков, профилактики в работе, удаления файлов, изменения функций, задержек при передаче данных или в работе Сайта и т.п., случившихся не по вине Онлайн-магазина.</p>
<p>11.2. Использование Сайта допускается только лицами, достигшими совершеннолетнего возраста. Покупатель несет ответственность за любое (даже без его согласия) использование учетной записи в Онлайн-магазине несовершеннолетними (не достигших 18 лет), а также за все их действия на Сайте.</p>
<p>11.3. Продавец и Покупатель несут в равной степени ответственность за несоблюдение условий настоящего Соглашение в соответствии с законодательством Российской Федерации.</p>
<p> </p>
<p align="center"><strong>12. Урегулирование споров</strong></p>
<p>12.1. При возникновении любых споров или разногласий, связанных с исполнением какого-либо из условий Соглашения, Покупатель и Продавец обязаны приложить все усилия для их разрешения посредством проведения переговоров, рассмотрения претензий, жалоб и прочих обращений Покупателя. Если споры не будут разрешены посредством переговоров, то они подлежат разрешению в установленном законодательством РФ порядке.</p>
<p>12.2. По прочим вопросам, которые не предусмотрены в настоящем Соглашении, Покупатель и Продавец обязаны руководствоваться действующим законодательством РФ.</p>
<p> </p>
<p align="center"><strong>13. Особые условия, форс-мажор</strong></p>
<p>13.1. Покупатель и Продавец освобождаются от ответственности за частичное или полное неисполнение обязательств по настоящему Соглашению, если это произошло вследствие событий чрезвычайного характера (форс-мажор) после заключения Соглашения. К таким происшествиям относятся обстоятельства непреодолимой силы, которые ни одна из сторон не могла предвидеть или предотвратить разумными мерами: наводнения, пожары, землетрясения, падение метеорита, взрывы, штормы, эпидемии и иные явления природы, а также военные действия, террористические акты, акции гражданского неповиновения и т.п.</p>
<p> </p>
<p align="center"><strong>14. Срок действия</strong></p>
<p>14.1. Настоящее Соглашение считается заключенным в момент обращения к Продавцу для покупки Товара. Срок действия соглашения не ограничен.</p>
<p>14.2. Моментом обращения считается момент, когда Покупатель фактически начал осуществлять действия, направленные на приобретение Товара у Продавца.</p>
          </div>
        </div>
    </section>
    <!-- / content -->

    <!-- footer-band -->
    <footer class='menu section-outer section-footer-band section-footer-band--grey'>
      <div class='section-inner'>
        <div class='container'>
          <div class="wrapper">
            <div class="nav-wrap">
              <ul class='nav-wrapper'>
                <li  class='nav-wrapper__item'><a href="../politika/index.html" class='nav-wrapper__item-link'>Политика конфиденциальности</a></li><li  class='nav-wrapper__item'><a href="./index.html" class='nav-wrapper__item-link'>Пользовательское соглашение</a></li><li  class='nav-wrapper__item'><a href="../vozvrat/index.html" class='nav-wrapper__item-link'>Политика возврата</a></li><li  class='nav-wrapper__item'><a href="../oplata/index.html" class='nav-wrapper__item-link'>Оплата</a></li><li  class='nav-wrapper__item'><a href="../dostavka/index.html" class='nav-wrapper__item-link'>О доставке</a></li><li  class='nav-wrapper__item'><a href="../org/index.html" class='nav-wrapper__item-link'>Организация</a></li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </footer>
    <!-- / footer-band -->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
<!-- <script src="https://www.googletagmanager.com/gtag/js?id=UA-165882189-1"></script>
<script>
	window.dataLayer = window.dataLayer || [];

	function gtag() {
		dataLayer.push(arguments);
	}
	gtag('js', new Date());

	gtag('config', 'UA-165882189-1');
</script>
<script src="https://www.googleoptimize.com/optimize.js?id=OPT-5NQCM4L"></script>
-->

<!--

<script>
    
      window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);}
    gtag('get', 'G-S7RPMR2Q3H', 'client_id', function (client_id) {
        // do something with client_id
      sessionStorage.setItem('gaClientID', client_id);
      console.log('setting gaClientId in metrics chunk')
    })
</script>
-->

<!-- Yandex.Metrika counter -->
<script type="text/javascript">
	(function (m, e, t, r, i, k, a) {
		m[i] = m[i] || function () {
			(m[i].a = m[i].a || []).push(arguments)
		};
		m[i].l = 1 * new Date();
		k = e.createElement(t), a = e.getElementsByTagName(t)[0], k.async = 1, k.src = r, a.parentNode.insertBefore(k, a)
	})
	(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

	ym(56736205, "init", {
		clickmap: true,
		trackLinks: true,
		accurateTrackBounce: true,
		webvisor: true
	});
</script>
<noscript>
	<div><img src="https://mc.yandex.ru/watch/56736205" style="position:absolute; left:-9999px;" alt="" /></div>
</noscript>
<!-- /Yandex.Metrika counter -->
    <script src="template/scripts/layout_1.js"></script>
<script src="template/scripts/app-new.min.js"></script>
<script>jQuery = $;</script>
<script src="template/scripts/jquery.maskedinput.min.js"></script>
<script src="template/lib/intl-tel/intlTelInput.js"></script>
<script>
    //$("input[name='phone']").mask("+7 (999) 999-9999");
    
    $(document).on("keypress", "[name='phone']", function (event) {
      var regex = /^[\s\d)-\.(]*$/;
      var key = String.fromCharCode(event.which);
    
      if (regex.test(key)) {
        return true;
      }
    
      return false;
    });
</script>
<script>
    $.fn.serializeControls = function() {
        var data = {};
    
        function buildInputObject(arr, val) {
            if (arr.length < 1)
                return val;
            var objkey = arr[0];
            if (objkey.slice(-1) == "]") {
                objkey = objkey.slice(0, -1);
            }
            var result = {};
            if (arr.length == 1) {
                result[objkey] = val;
            } else {
                arr.shift();
                var nestedVal = buildInputObject(arr, val);
                result[objkey] = nestedVal;
            }                            
            return result;
        }
    
        $.each(this.serializeArray(), function() {
            var val = this.value;
            var c = this.name.split("[");
            var a = buildInputObject(c, val);
            $.extend(true, data, a);
        });
    
        return data;
    }
    
    function parse_query_string(query) {
        var vars = query.split("&");
        var query_string = {};
        for (var i = 0; i < vars.length; i++) {
            var pair = vars[i].split("=");
            var key = decodeURIComponent(pair[0]);
            var value = decodeURIComponent(pair[1]);
            // If first entry with this name
            if (typeof query_string[key] === "undefined") {
                query_string[key] = decodeURIComponent(value);
                // If second entry with this name
            } else if (typeof query_string[key] === "string") {
                var arr = [query_string[key], decodeURIComponent(value)];
                query_string[key] = arr;
                // If third or later entry with this name
            } else {
                query_string[key].push(decodeURIComponent(value));
            }
        }
        return query_string;
    }

    let getFbpClientId  = () => {
        let result = /_fbp=(fb\.1\.\d+\.\d+)/.exec(window.document.cookie);
        if (!(result && result[1])) return '';
        return result[1];
    };
    
    let getFbcClientId  = () => {
        let result = /_fbc=(fb\.1\.\d+\.\d+)/.exec(window.document.cookie);
        if (!(result && result[1])) return '';
        return result[1];
    };
    
    $(document).ready(function(){
        let eventId = sessionStorage.getItem('eventId');
        if (!eventId) eventId = parseInt(Math.random() * 1000000000);
        sessionStorage.setItem('eventId', eventId);
        
        $('#ga_event_id').val(eventId);
        $('#ga_event_id').val(eventId);

        $('#user_agent').val(window.navigator.userAgent);

        sessionStorage.setItem('eventId', eventId);

        $.getJSON("https://jsonip.com?callback=?", function(data) {
            $('#user_ip').val(data.ip);
        });

        ym('56736205', 'getClientID', (clientID) => {
            $('#y_client_id').val(clientID);
        });
        // let tracker = ga.getAll()[0];
        
        $('#ga_client_id').val(sessionStorage.getItem('gaClientID'));
        $('#fb_fbp').val(getFbpClientId());
        $('#fb_fbc').val(getFbcClientId());
        
        
        $("#phone").intlTelInput();
        let aBtn = $(".item-contact").find('a')
        const utmList = new Proxy(new URLSearchParams(window.location.search), {
          get: (searchParams, prop) => searchParams.get(prop),
        });
        aBtn.each(function(item){
          let btn = $(this)
          let query = {};
          if(utmList.utm_source) {
              query = Object.assign(query, {utm_source: utmList.utm_source})
          }
          if(utmList.utm_medium) {
              query = Object.assign(query, {utm_medium: utmList.utm_medium})
          }
          if(utmList.utm_campaign) {
              query = Object.assign(query, {utm_campaign: utmList.utm_campaign})
          }
          if(utmList.utm_content) {
              query = Object.assign(query, {utm_content: utmList.utm_content})
          }
          if(utmList.utm_term) {
              query = Object.assign(query, {utm_term: utmList.utm_term})
          }
          if(query) {
              const paramsUtm = new URLSearchParams(query);
              const strUtm = paramsUtm.toString();
              btn.attr('href', btn.attr('href') + '?' + strUtm)
          }
        })
    })
</script>

<script>
    $('#delivery_form').submit(function(e) {
        e.preventDefault();
        
        var data = $(e.currentTarget).serializeControls();
        
        $('#delivery_form').css('opacity', 0.5);
        $('#delivery_form button[type="submit"]').prop('disabled', true);



        $.post(
            '/assets/components/bitrixcrm/',
            data,
            (data) => {
                
                var data = JSON.parse(data);
                
                if (data.result) {
                    
                    $('#delivery_form').css('opacity', 1);
                    
                    if ('redirect' in data) {
                        location = data.redirect;
                    }
                    else {
                        $('#delivery_form').hide();
                        $('#delivery_form').siblings('.title').html('Данные о доставке успешно отправлены!');
                    }
                    
                    $('#delivery_form button[type="submit"]').prop('disabled', false);
                }
        });
        
    });


    $('#order_form').submit(function(e) {
        e.preventDefault();
        $('.preloader').show();
        
        let query = '';
        if (location.href.split('?')[1]) {
            query = location.href.split('?')[1].split('#')[0];
        }
        const product_id =  $('#product_id').val();
        const product_cost =  $('#product_cost').val();
        const utm = Object.entries(parse_query_string(query)).filter(([key]) => key.includes('utm')).reduce((acc, item) => { acc[item[0]] = item[1]; return acc; }, {});
        const { name, phone, email, promocode, conversionData, utmData} = $(e.currentTarget).serializeControls();
        
        
        let patternPhone = /^[+]*[(]{0,1}[0-9]{1,3}[)]{0,1}[-\s\./0-9]*$/g;
        e.preventDefault();
        //disableButton(e);
        $(".preloader").show();
        let fieldSet = {
            name: false,
            phone: false,
            email: false,
        };
        let indexField = '';

        if (name === "") {
            $('input[name^="name"]').addClass('error')
            fieldSet.name = false;
        }
        else {
            $('input[name^="name"]').removeClass('error')
            fieldSet.name = true;
        }

        if (phone === "" || phone.match(/\d/g).length < 6) {
            $('input[name^="phone"]').addClass('error')
            fieldSet.phone = false;
        }
        else {
            $('input[name^="phone"]').removeClass('error')
            fieldSet.phone = true;
        }

        if (fieldSet.name && fieldSet.phone) {
            $('#order_form').css('opacity', 0.5);
            $('#order_form button[type="submit"]').prop('disabled', true);
            
    let sessionFormData = {};
    sessionFormData.name = name;
    sessionFormData.userForm_name = name;
    sessionFormData.userForm_email = email;
    sessionFormData.userForm_phone = phone;
    sessionFormData.email = email;
    sessionFormData.promocode = promocode;
    sessionFormData.product_cost = product_cost;
    sessionFormData.coversionData = conversionData;
    sessionFormData.utm = utm;
    sessionFormData.utmData = utmData;
    
    sessionStorage.setItem('userForm_phone', phone.replace(/\s/g, ''));
    sessionStorage.setItem('userForm_email', email);
    sessionStorage.setItem('userForm_name', name);
    sessionStorage.setItem('ecom_userForm_phone', phone.replace(/\s/g, ''));
    sessionStorage.setItem('ecom_userForm_email', email);
    sessionStorage.setItem('ecom_userForm_name', name);
    sessionStorage.setItem('ecom_item_list_name', 'Все Амулеты - amulets.taroirena.ru');
    sessionStorage.setItem('ecom_item_list_id', 'All_Amulets');
    sessionStorage.setItem('ecom_item_category', 'amulets');

    
    
    let items = [{
      "item_id": sessionStorage.getItem('ecom_content_ids') || Math.random()*100,
      "item_name": sessionStorage.getItem('eco_content_name') || document.title || "Undefined",
      "content_category": sessionStorage.getItem('ecom_content_category'),
      "currency": sessionStorage.getItem('ecom_item_currency') || "RUB",
      "index": 0,
      "item_list_name": sessionStorage.getItem('ecom_item_list_name') || "Все Амулеты - amulets.taroirena.ru",
      "item_brand": sessionStorage.getItem("ecom_item_brand") || "Amulets_taroirena",
      "item_category":  sessionStorage.getItem('ecom_item_category') || "amulets",
      "item_list_id": sessionStorage.getItem("ecom_item_list_id"),
      "item_list_name": sessionStorage.getItem("ecom_item_list_name"),
      "quantity": 1,
      "price": sessionStorage.getItem('ecom_item_value') || 4000
    }]
                 
 
    
    dataLayer.push({event: 'form_data_filled', ...sessionFormData, ecommerce: {items: items}})
    



for (const key in sessionFormData) {
    if (Object.hasOwnProperty.call(sessionFormData, key)) {
        let value = sessionFormData[key];
        console.log(key, sessionFormData[key])
        if(typeof value === 'object') {
            value = JSON.stringify(value)
            
        }
        sessionStorage.setItem('ti_'+ key, value)

    }
}

            $.post(
            '/assets/components/bitrixcrm/',
            {name, phone, email, product_id, promocode, product_cost, conversionData, utm, utmData},
            (data) => {
                
                $('#order_form').css('opacity', 1);
                
                var data = JSON.parse(data);
                

                
                if (data.result) {
                    
                    if ('redirect' in data) {
                        location = data.redirect;
                    }
                    else {
                        $('#order_form').hide();
                        $('#order .title-box__title').html('Спасибо!');
                        $('#order .description').html('Ваш заказ успешно отправлен');
                    }
                    
                    $('.preloader').hide();
                    $('#order_form button[type="submit"]').prop('disabled', false);
                    
                    //fbq('track', 'SubmitApplication');
                    //fbq('track', 'Purchase', { value: 300.00, currency: 'RUB'});
                }
        });
        }
        else {
            $(".preloader").hide();
        }
        
    });
</script>










</html>